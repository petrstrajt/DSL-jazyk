<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DSL – Referenční příručka</title>
  <style>
    body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
    h1, h2, h3 { color: #2c3e50; }
    code { background: #f4f4f4; padding: 0.2em 0.4em; border-radius: 3px; font-family: monospace; }
    pre { background: #f8f8f8; padding: 1em; border-left: 4px solid #ccc; overflow-x: auto; }
    .note { background: #e8f4f8; padding: 1em; border-radius: 4px; margin: 1em 0; }
    ul, ol { margin-bottom: 1rem; }
  </style>
</head>
<body>
  <h1>Referenční příručka DSL jazyka</h1>
  <p><em>Verze 1.3 – aktualizováno 10. 12. 2025</em></p>

  <p>Tento jazyk je doménově specifický (DSL) nad Common Lispem, navržený pro psaní programů v přirozené češtině bez závorek. Cílem je jednoduchost, srozumitelnost a přesnost pro programátory, kteří znají základy Common Lispu.</p>

  <h2>Obecná pravidla</h2>
  <ul>
    <li><strong>Textové hodnoty</strong> se píší <strong>v dvojitých uvozovkách</strong>: <code>"text"</code>.</li>
    <li><strong>Identifikátory</strong> (jména proměnných, funkcí, souborů) se píší <strong>bez uvozovek</strong>.</li>
    <li><strong>Blokové konstrukce</strong> (funkce, seznamy, smyčky) musí být <strong>explicitně ukončeny</strong> příkazem <code>konec ...</code>.</li>
    <li>Jazyk je <strong>case-insensitive</strong>, ale doporučuje se psát příkazy malými písmeny.</li>
  </ul>

  <h2>Základní příkazy</h2>

  <h3>1. Výstup na obrazovku</h3>
  <p><code>vypiš "text" na obrazovku</code></p>
  <pre>vypiš "Zadej své jméno:" na obrazovku</pre>
  <pre>(format t "~a~%" "Zadej své jméno:")</pre>

  <h3>2. Načtení vstupu od uživatele</h3>
  <p><code>načti jméno_proměnné ze vstupu</code></p>
  <pre>načti uzivatel ze vstupu</pre>
  <pre>(let ((uzivatel (read-line))) ... )</pre>

  <h3>3. Otevření souboru</h3>
  <p><code>otevři soubor "název_souboru" do proměnné jméno_proměnné</code></p>
  <pre>otevři soubor "denní_záznam.txt" do proměnné obsah</pre>
  <pre>(let ((obsah (with-open-file (s "denní_záznam.txt" :if-does-not-exist nil) ... )))</pre>

  <h3>4. Uložení do souboru</h3>
  <p><code>ulož "obsah" do souboru "název_souboru"</code></p>
  <pre>ulož "Dnes je krásný den." do souboru "poznámka.txt"</pre>
  <pre>(with-open-file (s "poznámka.txt" :direction :output ...) (format s "~a~%" "Dnes je krásný den."))</pre>

  <h3>5. Podmínka – test existence souboru</h3>
  <p><code>pokud soubor "název_souboru" existuje, proveď příkaz</code></p>
  <pre>pokud soubor "konfig.txt" existuje, vypiš "Konfigurace načtena." na obrazovku</pre>
  <pre>(when (probe-file "konfig.txt") (format t "Konfigurace načtena.~%"))</pre>

  <h2>Definice funkcí</h2>

  <h3>6. Definice funkce bez parametrů</h3>
  <pre>definuj funkci ahoj:
  vypiš "Ahoj světe" na obrazovku
konec funkce</pre>
  <pre>(defun ahoj () (format t "Ahoj světe~%"))</pre>

  <h3>7. Definice funkce s jedním parametrem</h3>
  <pre>definuj funkci pozdrav s parametrem jmeno:
  vypiš "Ahoj, @jmeno!" na obrazovku
konec funkce</pre>
  <pre>(defun pozdrav (jmeno) (format t "Ahoj, ~a!~%" jmeno))</pre>

  <h3>8. Volání funkce</h3>
  <p><code>zavolej funkci jméno_funkce</code></p>
  <pre>zavolej funkci ahoj</pre>
  <pre>(ahoj)</pre>

  <h2>Práce se seznamy</h2>

  <h3>9. Vytvoření seznamu</h3>
  <p><code>začátek seznamu<br>&nbsp;&nbsp;prvek1<br>&nbsp;&nbsp;prvek2<br>konec seznamu</code></p>
  <pre>začátek seznamu
  "deka"
  "lano"
  "mapa"
konec seznamu
ulož do proměnné batoh</pre>
  <pre>(let ((batoh '("deka" "lano" "mapa"))) ... )</pre>

  <h3>10. Výpis všech položek seznamu</h3>
  <p><code>pro každý prvek v jméno_seznamu:<br>&nbsp;&nbsp;vypiš prvek na obrazovku<br>konec smyčky</code></p>
  <pre>pro každý prvek v batoh:
  vypiš "- @prvek" na obrazovku
konec smyčky</pre>
  <pre>(dolist (prvek batoh) (format t "- ~a~%" prvek))</pre>

  <h3>11. Test, zda položka je v seznamu</h3>
  <p><code>pokud "položka" je v jméno_seznamu, proveď příkaz</code></p>
  <pre>pokud "mapa" je v batoh, vypiš "Máš mapu!" na obrazovku</pre>
  <pre>(when (member "mapa" batoh :test #'string=) (format t "Máš mapu!~%"))</pre>

  <h3>12. Přidání položky do seznamu</h3>
  <p><code>přidej "položka" do jméno_seznamu</code></p>
  <pre>přidej "nůž" do batoh</pre>
  <pre>(setf batoh (cons "nůž" batoh))</pre>
  <div class="note">
    Položka se přidá na začátek seznamu (nejefektivnější operace pro spojový seznam).
  </div>

  <h3>13. Odebrání položky ze seznamu</h3>
  <p><code>odeber "položka" ze jméno_seznamu</code></p>
  <pre>odeber "deka" z batoh</pre>
  <pre>(setf batoh (remove "deka" batoh :test #'string=))</pre>
  <div class="note">
    Odebere všechny výskyty dané položky.
  </div>

  <h2>Plánované rozšíření</h2>
  <ul>
    <li>Více parametrů ve funkcích</li>
    <li>Explicitní návratové hodnoty (<code>vrať hodnotu</code>)</li>
    <li>Smyčky s podmínkou: <code>opakuj, dokud ...</code></li>
    <li>Pokročilé chybové hlášky</li>
  </ul>

  <hr>
  <p><em>Dokument bude průběžně aktualizován. Zdroj: <a href="https://github.com/petrstrajt/DSL-jazyk">GitHub – DSL-jazyk</a></em></p>
</body>
</html>

